
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìš°ë¦¬ ë§¤ì¥ ì£¼ë³€ í‚¤ì›Œë“œ ì¥ì†Œ ê²€ìƒ‰ê¸°</title>
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=b3aec68754d15e6e3d7a8f7e49246a76&libraries=services"></script>
  <style>
    #map { width: 100%; height: 400px; margin-bottom: 20px; }
    .container { padding: 20px; font-family: Arial, sans-serif; }
    input, button { padding: 8px; margin: 5px 0; width: 100%; max-width: 400px; }
    ul { list-style: none; padding: 0; }
    .section { margin-top: 20px; }
  </style>
</head>
<body>
  <div class="container">
    <h2>ğŸ“ ìš°ë¦¬ ë§¤ì¥ ì£¼ë³€ í‚¤ì›Œë“œ ì¥ì†Œ ê²€ìƒ‰</h2>

    <form onsubmit="searchByAddress(); return false;">
      <div>
        <label>ë§¤ì¥ ì£¼ì†Œ:</label><br>
        <input type="text" id="storeAddress" value="ì„œìš¸ ìš©ì‚°êµ¬ ì´íƒœì›ë¡œ 123">
      </div>
      <div>
        <label>í‚¤ì›Œë“œ ëª©ë¡ (ì‰¼í‘œë¡œ êµ¬ë¶„):</label><br>
        <input type="text" id="keywords" value="ì¹´í˜,ë§›ì§‘,í¸ì˜ì ,í—¬ìŠ¤ì¥">
      </div>
      <button type="submit">ê²€ìƒ‰ ì‹œì‘</button>
    </form>

    <div id="map"></div>

    <div class="section" id="results"></div>
  </div>

  <script>
    const map = new kakao.maps.Map(document.getElementById('map'), {
      center: new kakao.maps.LatLng(37.5665, 126.9780),
      level: 4
    });

    const ps = new kakao.maps.services.Places();
    const geocoder = new kakao.maps.services.Geocoder();
    const marker = new kakao.maps.Marker();
    marker.setMap(map);

    function searchByAddress() {
      const address = document.getElementById('storeAddress').value;
      const keywordStr = document.getElementById('keywords').value;
      const keywords = keywordStr.split(',').map(k => k.trim()).filter(k => k.length > 0);
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '';

      geocoder.addressSearch(address, function(result, status) {
        if (status === kakao.maps.services.Status.OK) {
          const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
          map.setCenter(coords);
          marker.setPosition(coords);

          keywords.forEach(keyword => {
            ps.keywordSearch(keyword, (data, status) => {
              if (status === kakao.maps.services.Status.OK) {
                const section = `<h4>ğŸ” ${keyword}</h4><ul>` +
                  data.map(place => `<li>${place.place_name} - ${place.road_address_name || place.address_name}</li>`).join('') +
                  '</ul>';
                resultsDiv.innerHTML += section;
              } else {
                resultsDiv.innerHTML += `<h4>ğŸ” ${keyword}</h4><p>ê²°ê³¼ ì—†ìŒ</p>`;
              }
            }, {
              location: coords,
              radius: 1000
            });
          });
        } else {
          alert('ì£¼ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
      });
    }
  </script>
</body>
</html>
