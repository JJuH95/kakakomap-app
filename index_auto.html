
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìš°ë¦¬ ë§¤ì¥ ì£¼ë³€ ì¹´í…Œê³ ë¦¬ ì¥ì†Œ ìë™ ê²€ìƒ‰</title>
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=b3aec68754d15e6e3d7a8f7e49246a76&libraries=services"></script>
  <style>
    #map { width: 100%; height: 400px; margin-bottom: 20px; }
    .container { padding: 20px; font-family: Arial, sans-serif; }
    input, button { padding: 8px; margin: 5px 0; width: 100%; max-width: 400px; }
    ul { list-style: none; padding: 0; }
    .section { margin-top: 20px; }
  </style>
</head>
<body>
  <div class="container">
    <h2>ğŸ“ ìš°ë¦¬ ë§¤ì¥ ì£¼ë³€ ì¥ì†Œ ìë™ ê²€ìƒ‰</h2>

    <form onsubmit="searchCategories(); return false;">
      <div>
        <label>ë§¤ì¥ ì£¼ì†Œ:</label><br>
        <input type="text" id="storeAddress" value="ì„œìš¸ ìš©ì‚°êµ¬ ì´íƒœì›ë¡œ 123">
      </div>
      <button type="submit">ìë™ ê²€ìƒ‰ ì‹œì‘</button>
    </form>

    <div id="map"></div>
    <div class="section" id="results"></div>
  </div>

  <script>
    const map = new kakao.maps.Map(document.getElementById('map'), {
      center: new kakao.maps.LatLng(37.5665, 126.9780),
      level: 4
    });

    const geocoder = new kakao.maps.services.Geocoder();
    const ps = new kakao.maps.services.Places();
    const marker = new kakao.maps.Marker();
    marker.setMap(map);

    const categoryCodes = [
      { code: "FD6", name: "ğŸ½ ìŒì‹ì " },
      { code: "CE7", name: "â˜• ì¹´í˜" },
      { code: "CS2", name: "ğŸª í¸ì˜ì " },
      { code: "HP8", name: "ğŸ¥ ë³‘ì›" },
      { code: "PM9", name: "ğŸ’Š ì•½êµ­" },
      { code: "BK9", name: "ğŸ¦ ì€í–‰" },
      { code: "MT1", name: "ğŸ›’ ë§ˆíŠ¸" },
      { code: "OL7", name: "â›½ ì£¼ìœ ì†Œ" }
    ];

    function searchCategories() {
      const address = document.getElementById('storeAddress').value;
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '';

      geocoder.addressSearch(address, function(result, status) {
        if (status === kakao.maps.services.Status.OK) {
          const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
          map.setCenter(coords);
          marker.setPosition(coords);

          categoryCodes.forEach(cat => {
            ps.categorySearch(cat.code, (data, status) => {
              if (status === kakao.maps.services.Status.OK) {
                const section = `<h4>${cat.name}</h4><ul>` +
                  data.map(place => `<li>${place.place_name} - ${place.road_address_name || place.address_name}</li>`).join('') +
                  '</ul>';
                resultsDiv.innerHTML += section;
              }
            }, {
              location: coords,
              radius: 1000
            });
          });
        } else {
          alert('ì£¼ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
      });
    }
  </script>
</body>
</html>
